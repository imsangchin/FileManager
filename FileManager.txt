DisplayMetrics metrics = new DisplayMetrics();
Display display = getActivity().getWindowManager().getDefaultDisplay();
display.getMetrics(metrics);
Log.i("FileManager", ""+metrics.widthPixels+" "+metrics.heightPixels+" "+metrics.densityDpi+" "+metrics.density);



FileManager


前三项可改可不改，先保留
1、Project_FileManager
删除根目录下的AndroidManifest.xml


2、filemanager nodule
主配置文件AndroidManifest.xml修改android:uses-permission为uses-permission


3、build.gradle
filemanager将apply plugin 'android'改为apply plugin 'com.android.application'
other modules将apply plugin 'android-library'改为apply plugin 'com.android.library'


FileManager.java
NORMAL_SEARCH(R.id.searchlist),
HOME_PAGE(R.id.homepage),  //引导完成后进入的首页面
FILE_LIST(R.id.filelist),
RECYCLE_BIN("RecycleBinFragment"),
HIDDEN_ZONE("HiddenZoneFragment");

HomePageFragment.java
原先的代码结构是以home为主页面，点击其页面上的项时跳转到子页面，然后返回都会回到home页面，
home包括三个大的部分：分类、存储空间、内存分析与回收站等；


那么对于现在要生成三个类别来说，整体布局可能需要调整；


4、存储空间显示位置
如果有SD卡，那么采用默认布局：内存组件在左，外存组件在右；
否则，将内存显示在布局中间；
相关文件：HomePageFragment.java、home_page.xml；
自定义组件ExpandableHeightGridView.java，id为local_storage_list；
HomePageFragment.java--private void updateLocalStorageList(){}，
在该方法中判断存储空间情况，动态调整布局；
if(storageVolume.size() == 1) {
	mLocalStorageListView.setNumColumns(1);
} else {
	mLocalStorageListView.setNumColumns(2);
}
测试了几台Asus手机和平板是可以自适应的，
但是在OPPO R9m上不行，只有内存卡的时候不能组件不会自动居中布局；


三大类标签：分类、本地、最近；

分类
5、分类涉及的类有HomePageFragment.java、CategoryPreference.java、CategoryItem.java；
如果确定只留九个子类别的话，需要在类CategoryPreference.java中修改以下函数，去除五个不需要的类别；
public static List<CategoryItem> createDefaultCategorys(Resources res) {
	// create the asus default category sorting
	List<CategoryItem> categorys = new ArrayList<CategoryItem>();
	categorys.add(CategoryItem.create(res, CategoryItem.IMAGE, true));
	categorys.add(CategoryItem.create(res, CategoryItem.VIDEO, true));
	categorys.add(CategoryItem.create(res, CategoryItem.MUSIC, true));
	categorys.add(CategoryItem.create(res, CategoryItem.COMPRESSED, true));
	//categorys.add(CategoryItem.create(res, CategoryItem.FAVORITE, true));
	categorys.add(CategoryItem.create(res, CategoryItem.APP, true));
	categorys.add(CategoryItem.create(res, CategoryItem.DOCUMENT, true));
	categorys.add(CategoryItem.create(res, CategoryItem.DOWNLOAD, true));
	//categorys.add(CategoryItem.create(res, CategoryItem.RECENT, true));  //其中最近分类移到了顶部标签页中作为一级栏目
	//categorys.add(CategoryItem.create(res, CategoryItem.LARGE_FILE, false));
	//categorys.add(CategoryItem.create(res, CategoryItem.PDF, false));
	//categorys.add(CategoryItem.create(res, CategoryItem.GAME, false));
	return categorys;
}

在实现类别的添加时，不管是第一部分的分类项，还是第三部分的额外工具项，都有特定的管理类，
如分类是上面的CategoryPreference，工具是ToolPreference；
工具类别暂时去除回收站这一项，以后可能添加或者替换成垃圾清理（接口调用）：
public static List<ToolItem> createDefaultTools(Context context) {
	ArrayList<ToolItem> toolItems = new ArrayList<ToolItem>();
	toolItems.add(new ToolItem(context,ToolItem.STORAGE_ANALYZER));
	//toolItems.add(new ToolItem(context, ToolItem.RECYCLE_BIN));
	toolItems.add(new ToolItem(context,ToolItem.HTTP_FILE_TRANSFER));
	//addCMTool(context, toolItems);
	toolItems.add(new ToolItem(context,ToolItem.CLEAN_MASTER));
	//addZenUITool(context,toolItems);
	toolItems.add(new ToolItem(context, ToolItem.HIDDEN_ZONE));
	return toolItems;
}
注意，addCMTool方法从代码来看是判断当前设备是否是asus & preload com.cleanmaster.mguard，
如果是则在tool栏添加clean master项，否则不加；这一点在布局等情况下需要考虑；
CN版的将这一条去除即可，即都使用Asus CN版手机管家的垃圾回收接口；
其实使用call该入口时，替换成新的接口即可，原先的代码结构进行细微的调整；
目前点击HomePageFragment中的项时弹出提示：
Toast.makeText(mActivity, "接垃圾清理接口", Toast.LENGTH_SHORT).show();


6、添加两个类别，QQ和WeChat，包括图片、字串等，不过这些资源需要UI等team另外提供；
colors.xml
<color name="dark_theme_category_qq">#272280</color>
<color name="dark_theme_category_wechat">#e6543e</color>

asus_strings_151014.xml
<string name="category_qq1" maxwidth="11">"QQ"</string>
<string name="category_wechat1" maxwidth="11">"WeChat"</string>

CategoryItem.java
case QQ:
	return res.getDrawable(R.drawable.icon_qq);
case WECHAT:
	return res.getDrawable(R.drawable.icon_wechat);
同理还有很多地方需要添加这两个分类对应的选择项；


7、去除分类选择与排序的选择菜单（原先在分类标签的右边）
home_page.xml
将id为category_edit的组件隐藏，android:visibility="gone"；
在建立全局分页标签后，还需要将原先的分类标题category_title隐藏，即将两者的所属容器隐藏即可；


8、设置分类图标的大小，到时候UI调整需要参考这里的尺寸；
一般需要调整的是手机，CN版本也应该手机为主，将76改为50会变小很多；
<dimen name="category_image_height">50dp</dimen>
<dimen name="category_image_count_width">36dp</dimen>
<dimen name="category_capsule_margin">42dp</dimen>
例如OPPO r9m density为3，SW为360dp，不同SW需要设置不同的尺寸；
目前修改了SW为360和320两种设备尺寸。


9、音乐不分文件夹，全部以列表的形式展示
FileListManager.java
ArrayList<LocalVFile> albumFiles = MediaProviderAsyncHelper.getMusicAlbums(getActivity());
ArrayList<LocalVFile> albumFiles = MediaProviderAsyncHelper.getMusicFiles(getActivity(), false);


10、

